#1. install mssql on Linux 
https://docs.microsoft.com/en-us/sql/linux/quickstart-install-connect-red-hat?view=sql-server-2017
#1.1 server
sudo curl -o /etc/yum.repos.d/mssql-server.repo https://packages.microsoft.com/config/rhel/7/mssql-server-2017.repo
sudo yum install -y mssql-server
sudo /opt/mssql/bin/mssql-conf setup
#1.2 tools
sudo curl -o /etc/yum.repos.d/msprod.repo https://packages.microsoft.com/config/rhel/7/prod.repo
sudo yum install -y mssql-tools unixODBC-devel

#2. restore database 
https://docs.microsoft.com/en-us/sql/linux/sql-server-linux-migrate-restore-database?view=sql-server-2017

RESTORE FILELISTONLY FROM DISK = '/var/lib/ceph/osd/ceph-5/data/dbbak/prepay/prepaybak20190103.bak'
GO
prepay_Data e:\Program Files\Microsoft SQL Server\MSSQL10_50.SQLEXPRESS\MSSQL\DATA\prepay.MDF D PRIMARY 
prepay_Log  e:\Program Files\Microsoft SQL Server\MSSQL10_50.SQLEXPRESS\MSSQL\DATA\prepay.LDF                                                                   
RESTORE DATABASE prepay 
FROM DISK = '/var/lib/ceph/osd/ceph-5/data/dbbak/prepay/prepaybak20190103.bak'
WITH MOVE 'prepay_Data' TO '/var/opt/mssql/data/prepay.mdf',
MOVE 'prepay_Log' to '/var/opt/mssql/data/prepay_log.ldf'
GO

#3. datadir
https://docs.microsoft.com/en-us/sql/linux/sql-server-linux-configure-mssql-conf?view=sql-server-2017#datadir
sudo chown mssql /tmp/data
sudo chgrp mssql /tmp/data
sudo /opt/mssql/bin/mssql-conf set filelocation.defaultdatadir /tmp/data

#4. log file too big
ALTER DATABASE prepay SET RECOVERY SIMPLE;
alter database prepay modify file (name = prepay_log, SIZE = 200MB, FILEGROWTH=50MB)
dbcc shrinkfile (prepay_log,200)
go
